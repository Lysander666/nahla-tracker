<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    
    <title>Nahla Tracker</title>

    <link id="favicon" rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='80'>ðŸŒ•</text></svg>">
    
    <style>
        body { 
            background-color: #1a1a1a; 
            color: #e0e0e0; 
            font-family: monospace; 
            font-size: 1.1rem; 
            line-height: 1.6; 
            padding: 20px;
        }
        .container {
            max-width: 1800px; /* --- WIDENED for 5 columns --- */
            margin: 0 auto;
        }
        
        h2 {
            text-align: center;
        }
        
        #tracker { 
            padding: 20px; 
            border: 1px solid #444; 
            background-color: #2a2a2a;
            border-radius: 8px;
            margin-bottom: 25px;
            text-align: center; 
        }
        
        /* --- Main 5-Column Layout --- */
        #system-info-container {
            display: flex;
            gap: 20px;
            align-items: flex-start; /* Aligns all boxes to the top */
        }
        
        .celestial-body, #map-panel, #manifest-panel {
            flex: 1; /* --- THIS IS KEY: All 5 columns share space equally --- */
            border: 1px solid #444;
            border-radius: 8px;
            padding: 0 20px 20px 20px;
            background-color: #222;
        }
        
        .celestial-body h3, #map-panel h3, #manifest-panel h3 {
            color: #61dafb; /* Accent color */
            border-bottom: 1px solid #444;
            padding-bottom: 10px;
        }
        
        .celestial-body ul, #map-panel ul {
            list-style-type: none;
            padding-left: 0;
            font-size: 0.9rem;
            color: #ccc;
        }
        .celestial-body li, #map-panel li {
            margin-bottom: 8px;
        }
        .celestial-body li strong, #map-panel li strong {
            color: #bbb;
        }

        #map-panel h4 {
            margin-bottom: 10px;
            color: #bbb;
        }
        
        /* --- Manifest List Styling --- */
        #manifest-panel {
            max-height: 360px; /* Make the list scrollable */
            overflow-y: auto;
        }
        .manifest-list {
            list-style-type: none;
            padding-left: 0;
            font-size: 0.85rem;
        }
        .manifest-list li {
            margin-bottom: 5px;
            color: #aaa;
        }
        .manifest-list strong {
            color: #ddd;
            min-width: 40px;
            display: inline-block;
        }
        .manifest-list ul {
            list-style-type: square;
            color: #888;
            padding-left: 20px;
            margin-top: 5px;
        }
        
        /* Highlight special bodies */
        .hl-landable { color: #8f9; }
        .hl-terraform { color: #61dafb; font-weight: bold; }
        .hl-earthlike { color: #61fbb0; font-weight: bold; text-transform: uppercase; }
        .hl-life { color: #fbd061; font-weight: bold; }

    </style>
</head>
<body>
    <div class="container">
        <h2>Nahla Day/Night Cycle Tracker - LIVE</h2>
        <div id="tracker">
            <div id="status">Loading...</div>
            <div id="hope">...</div>
            <div id="band">...</div>
            <div id="rebekah">...</div>
            
            <div style="font-size: 0.9rem; color: #aaa; margin-top: 15px;">
                <a href="https://inara.cz/elite/cmdr/440263/" style="color: inherit; text-decoration: none;">By Lysander666 on Inara</a>.
            </div>
        </div>

        <h2>System Information</h2>

        <div id="system-info-container">
            
            <div class="celestial-body" id="nahla-info">
                <h3>Nahla (Moon)</h3>
                <ul>
                    <li><strong>Type:</strong> Rocky Sulphur Moon</li>
                     <li><strong>Mass:</strong> 0.0458 Earths</li>
                    <li><strong>Atmosphere:</strong> None</li>
                    <li><strong>Gravity:</strong> 0.31 G</li>
                    <li><strong>Temp:</strong> ~273 K (Observed)</li>
                    <li><strong>Volcanism:</strong> Metallic Magma</li>
                    <li><strong>Orbital Period:</strong> 1.1 Earth days</li>
                    <li><strong>Rotation:</strong> 1.1 Earth days (Tidally Locked)</li>
                </ul>
            </div>

            <div class="celestial-body" id="rebekah-info">
                <h3>Rebekah (Parent)</h3>
                <ul>
                    <li><strong>Type:</strong> Class IV Gas Giant, ringed</li>
                    <li><strong>Mass:</strong> 3202.37 Earths</li>
                    <li><strong>Gravity:</strong> 29.19 G</li>
                    <li><strong>Temp:</strong> 908 K</li>
                    <li><strong>Atmosphere:</strong> H<sub>2</sub> (72.89%), He (27.11%)</li>
                    <li><strong>Orbital Period:</strong> 555.2 Earth days</li>
                    <li><strong>Rotation:</strong> 0.4 Earth days</li>
                </ul>
            </div>

            <div class="celestial-body" id="hope-info">
                <h3>Hope (Primary Star)</h3>
                <ul>
                    <li><strong>Type:</strong> A5 Vb Blue-White Star</li>
                    <li><strong>Mass:</strong> 1.6758 Solar</li>
                    <li><strong>Temp:</strong> 8,631 K</li>
                    <li><strong>Age:</strong> 800 million years</li>
                    <li><strong>Rotation:</strong> 1.0 Earth days</li>
                    <li><strong>&nbsp;</strong></li> <li><strong>&nbsp;</strong></li> </ul>
            </div>

            <div id="map-panel">
                <h3>Hypi Bra EV-P d5-78</h3>
                <ul>
                    <li><strong>Dist. to Sol:</strong> 43,895.24 ly</li>
                    <li><strong>Dist. to Colonia:</strong> 22,698.70 ly</li>
                </ul>
                <h4>Galactic Position</h4>
                <img src="galaxy_map.png" alt="Galactic Position" style="width: 100%; max-width: 200px; margin: 10px auto; display: block; border-radius: 4px;">
            </div>

            <div id="manifest-panel">
                <h3>Full System Manifest</h3>
                <ul class="manifest-list">
                    <li><strong>A</strong>Blue-White Star (Scoopable)</li>
                    <li><strong>A Belt</strong>   Rocky Belt</li>
                    <li><strong>1</strong>Metal-rich body (3,835 K)</li>
                    <li><strong>2</strong>Class III gas giant
                        <ul>
                            <li><strong>2a</strong>Rocky body <span class="hl-landable">(Landable)</span></li>
                            <li><strong>2b</strong>Rocky body <span class="hl-landable">(Landable)</span></li>
                            <li><strong>2c</strong>Rocky body <span class="hl-landable">(Landable)</span></li>
                            <li><strong>2d</strong>Rocky body <span class="hl-landable">(Landable)</span>
                                <ul><li><strong>2da</strong>Rocky body <span class="hl-landable">(Landable)</span></li></ul>
                            </li>
                            <li><strong>2e</strong>Rocky body <span class="hl-landable">(Landable)</span></li>
                        </ul>
                    </li>
                    <li><strong>3</strong>High metal content (1,077 K)</li>
                    <li><strong>4</strong>Y (Brown dwarf) Star
                        <ul>
                            <li><strong>4a</strong>Rocky body <span class="hl-landable">(Landable)</span></li>
                        </ul>
                    </li>
                    <li><strong>5</strong><span class="hl-terraform">High metal content (Terraform Candidate)</span></li>
                    <li><strong>6</strong>Class IV gas giant (Rebekah)
                        <ul>
                            <li><strong>6a</strong>Rocky body <span class="hl-landable">(Landable / Nahla)</span></li>
                            <li><strong>6b</strong>Icy body</li>
                        </ul>
                    </li>
                    <li><strong>7</strong><span class="hl-life">Gas giant with water-based life</span>
                        <ul>
                            <li><strong>7a</strong>Rocky body <span class="hl-landable">(Landable)</span></li>
                            <li><strong>7b</strong>Rocky body <span class="hl-landable">(Landable)</span></li>
                            <li><strong>7c</strong>Rocky body <span class="hl-landable">(Landable)</span></li>
                        </ul>
                    </li>
                    <li><strong>8</strong><span class="hl-earthlike">*** Earth-like world ***</span></li>
                    <li><strong>9</strong>Class IV gas giant
                        <ul>
                            <li><strong>9a</strong>Rocky body <span class="hl-landable">(Landable)</span></li>
                            <li><strong>9b</strong>Rocky body <span class="hl-landable">(Landable)</span></li>
                            <li><strong>9c</strong>Rocky body <span class="hl-landable">(Landable)</span></li>
                            <li><strong>9d</strong>Rocky body <span class="hl-landable">(Landable)</span>
                                <ul><li><strong>9da</strong>Rocky body <span class="hl-landable">(Landable)</span></li></ul>
                            </li>
                        </ul>
                    </li>
                    <li><strong>10</strong>High metal content (241 K)</li>
                    <li><strong>11</strong>High metal content (432 K)</li>
                    <li><strong>12</strong>High metal content (163 K)</li>
                </ul>
            </div>
            
        </div>

    </div> <script>
        // --- All your constants, ported to JavaScript ---
        const MOON_NAME = "Nahla";
        const SOLAR_DAY_LENGTH_EARTH_DAYS = 1.1;
        // NOTE: JavaScript needs 'T' for ISO date format
        const REBEKAH_LAST_RISE = new Date("2025-11-09T21:30:00"); 
        const GALACTIC_BAND_PEAK = new Date("2025-11-09T23:00:00");
        const LAST_SUNRISE = new Date("2025-11-09T20:00:00");
        
        const SECONDS_IN_EARTH_DAY = 24 * 60 * 60;
        const SOLAR_DAY_LENGTH_SECONDS = SOLAR_DAY_LENGTH_EARTH_DAYS * SECONDS_IN_EARTH_DAY;

        // --- All your helper functions, ported to JavaScript ---
        
        function format_timedelta(total_seconds) {
            const hours = Math.floor(total_seconds / 3600);
            const minutes = Math.floor((total_seconds % 3600) / 60);
            const seconds = Math.floor(total_seconds % 60);
            // padStart adds leading zeros
            return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function get_rebekah_status(current_time) {
            // Date subtraction in JS gives milliseconds
            const time_since_rise = (current_time - REBEKAH_LAST_RISE) / 1000; // in seconds
            const current_cycle_seconds = time_since_rise % SOLAR_DAY_LENGTH_SECONDS;
            const half_rotation = SOLAR_DAY_LENGTH_SECONDS / 2;

            if (current_cycle_seconds < half_rotation) {
                const time_until_set = half_rotation - current_cycle_seconds;
                return `Rebekah: ðŸª VISIBLE | Est. set in: ${format_timedelta(time_until_set)} (ESTIMATE)`;
            } else {
                const time_until_rise = SOLAR_DAY_LENGTH_SECONDS - current_cycle_seconds;
                return `Rebekah: â”€ below horizon | Est. rise in: ${format_timedelta(time_until_rise)} (ESTIMATE)`;
            }
        }

        function get_sky_arc_indicator(progress, is_daytime) {
            if (is_daytime) {
                const positions = ["ðŸŒ…", "â˜€ï¸", "â˜€ï¸", "â˜€ï¸", "â˜€ï¸", "ðŸŒ‡"];
                const index = Math.floor(progress * (positions.length - 1));
                let arc = ["â”€", "â”€", "â”€", "â”€", "â”€", "â”€"];
                arc[index] = positions[index];
                return `Hope: [${arc.join("")}]`;
            } else {
                return "Hope: [â”€â”€â”€â”€â”€â”€â”€â”€] (below horizon)";
            }
        }

        function get_galactic_band_indicator(current_time, is_daytime) {
            const time_since_peak = (current_time - GALACTIC_BAND_PEAK) / 1000; // in seconds
            const current_cycle_seconds = time_since_peak % SOLAR_DAY_LENGTH_SECONDS;
            const hours_since_peak = current_cycle_seconds / 3600;

            if (is_daytime) {
                return "Galactic Band: ðŸŒŒ present (washed out by Hope's light, low angle)";
            }
            if (hours_since_peak < 1.5 || hours_since_peak > 24.9) {
                return "Galactic Band: ðŸŒŒâœ¨ PEAK BRIGHTNESS (~70Â° angle, highest elevation)";
            } else if (hours_since_peak < 4.0 || hours_since_peak > 22.4) {
                return "Galactic Band: ðŸŒŒ BRIGHT (prominent, high angle)";
            } else if (10.0 < hours_since_peak && hours_since_peak < 16.4) {
                return "Galactic Band: ðŸŒŒ visible (moderate, lower angle/near horizon)";
            } else {
                return "Galactic Band: ðŸŒŒ visible (rising/setting through rotation)";
            }
        }

        // --- The main update loop ---
        function updateDisplay() {
            const current_time = new Date();
            const time_since_sunrise = (current_time - LAST_SUNRISE) / 1000; // in seconds
            const current_cycle_seconds = time_since_sunrise % SOLAR_DAY_LENGTH_SECONDS;
            const half_solar_day_seconds = SOLAR_DAY_LENGTH_SECONDS / 2;
            const moon_time_progress = current_cycle_seconds / SOLAR_DAY_LENGTH_SECONDS;
            
            const hours_into_moon_day = moon_time_progress * SOLAR_DAY_LENGTH_EARTH_DAYS * 24;

            let data = {};

            if (current_cycle_seconds < half_solar_day_seconds) {
                // Daytime
                const day_progress = current_cycle_seconds / half_solar_day_seconds;
                const time_until_sunset = half_solar_day_seconds - current_cycle_seconds;
                data.status = `â˜€ï¸  DAY on ${MOON_NAME} | Sunset in: ${format_timedelta(time_until_sunset)} | ${hours_into_moon_day.toFixed(2)}h into solar day`;
                data.hope = get_sky_arc_indicator(day_progress, true);
                data.band = get_galactic_band_indicator(current_time, true);
            } else {
                // Nighttime
                const night_progress = (current_cycle_seconds - half_solar_day_seconds) / half_solar_day_seconds;
                const time_until_sunrise = SOLAR_DAY_LENGTH_SECONDS - current_cycle_seconds;
                data.status = `ðŸŒ™ NIGHT on ${MOON_NAME} | Sunrise in: ${format_timedelta(time_until_sunrise)} | ${hours_into_moon_day.toFixed(2)}h into solar day`;
                data.hope = get_sky_arc_indicator(night_progress, false);
                data.band = get_galactic_band_indicator(current_time, false);
            }

            data.rebekah = get_rebekah_status(current_time);

            // Update the HTML
            document.getElementById("status").innerText = data.status;
            document.getElementById("hope").innerText = data.hope;
            document.getElementById("band").innerText = data.band;
            
            // --- THIS IS THE FIX ---
            // Removed the extra ".innerText ="
            document.getElementById("rebekah").innerText = data.rebekah;
            // --- END FIX ---
        }

        // Run the update function once immediately, then every second
        updateDisplay();
        setInterval(updateDisplay, 1000);
    </script>
</body>
</html>
