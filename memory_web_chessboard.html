<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Web Chess</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22%236366f1%22/><rect width=%2250%22 height=%2250%22 fill=%22rgba(255,255,255,0.4)%22/><rect x=%2250%22 y=%2250%22 width=%2250%22 height=%2250%22 fill=%22rgba(255,255,255,0.4)%22/></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        body { 
            font-family: 'Inter', system-ui, -apple-system, sans-serif; 
            background-color: #020617; 
            color: #f1f5f9; 
            overflow-x: hidden; 
        }
        
        .tile-light { background-color: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.05); }
        .tile-dark { background-color: rgba(0, 0, 0, 0.4); border-color: rgba(0, 0, 0, 0.2); }
        
        .number-glow { text-shadow: 0 0 12px rgba(255,255,255,0.3); }

        .chess-piece {
            font-size: 2.8rem;
            cursor: pointer;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
            user-select: none;
            line-height: 1;
            z-index: 30;
            transition: transform 0.15s ease;
        }
        .chess-piece:hover { transform: scale(1.1); }
        
        @media (max-width: 640px) {
            .chess-piece { font-size: 1.8rem; }
        }
        
        .white-piece { color: #ffffff; }
        .black-piece { color: #64748b; } 

        .tray-area {
            min-height: 38px;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 0 8px;
            border-radius: 8px;
            flex-wrap: wrap;
            overflow: hidden;
        }

        .board-visual-state { transition: opacity 0.4s ease, filter 0.4s ease; }

        .academic-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white; text-align: center; font-size: 2.5rem; font-weight: 800;
            width: 80px; height: 80px; border-radius: 16px; outline: none;
        }
        .academic-input:focus {
            border-color: #6366f1;
            background: rgba(99, 102, 241, 0.05);
        }

        .legend-card {
            background: rgba(15, 23, 42, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 1.5rem;
        }
        
        .timer-bar { transition: width 0.1s linear; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        // --- CONSTANTS ---
        const GLYPHS = {
            wP: '‚ôô', wN: '‚ôò', wB: '‚ôó', wR: '‚ôñ', wQ: '‚ôï', wK: '‚ôî',
            bP: '‚ôü', bN: '‚ôû', bB: '‚ôù', bR: '‚ôú', bQ: '‚ôõ', bK: '‚ôö'
        };

        const PAWN_HINTS = ['üü°', 'üí°', 'üîµ', 'üîó', 'üåê', '‚öôÔ∏è', '‚ö†Ô∏è', 'üß©'];
        
        const getEmojiHint = (type, square) => {
            const file = square[0];
            const fileIdx = file.charCodeAt(0) - 97;
            switch(type) {
                case 'k': return 'üü¢';
                case 'q': return 'üìó';
                case 'r': return fileIdx === 0 ? 'üå±' : 'üß™';
                case 'n': return fileIdx === 1 ? '‚ù§Ô∏è' : 'ü©∏';
                case 'b': return fileIdx === 2 ? 'üü£' : 'üå∏';
                case 'p': return PAWN_HINTS[fileIdx];
                default: return '';
            }
        };

        const PIECE_NAMES = {
            p: 'Pawn', n: 'Knight', b: 'Bishop', r: 'Rook', q: 'Queen', k: 'King'
        };

        const colorClasses = {
            emerald: 'border-emerald-500/50 text-emerald-100 shadow-[inset_0_0_20px_rgba(16,185,129,0.05)]',
            amber: 'border-amber-500/50 text-amber-100 shadow-[inset_0_0_20px_rgba(245,158,11,0.05)]',
            blue: 'border-blue-500/50 text-blue-100 shadow-[inset_0_0_20px_rgba(59,130,246,0.05)]',
            purple: 'border-purple-500/50 text-purple-100 shadow-[inset_0_0_20px_rgba(168,85,247,0.05)]'
        };

        const btnColors = {
            emerald: 'bg-emerald-500',
            amber: 'bg-amber-500',
            blue: 'bg-blue-500',
            purple: 'bg-purple-500'
        };

        const Icon = ({ name, size = 16, className = "" }) => {
            const iconRef = useRef(null);
            useEffect(() => {
                if (window.lucide && iconRef.current) {
                    iconRef.current.innerHTML = '';
                    const i = document.createElement('i');
                    const kebabName = name.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g, '$1-$2').toLowerCase().replace(/^-/, '');
                    i.setAttribute('data-lucide', kebabName);
                    if (className) i.setAttribute('class', className);
                    i.style.width = size + 'px'; i.style.height = size + 'px';
                    iconRef.current.appendChild(i);
                    window.lucide.createIcons();
                }
            }, [name, size, className]);
            return <span ref={iconRef} className="flex items-center justify-center shrink-0" />;
        };

        const App = () => {
            const [sectorColors, setSectorColors] = useState(['emerald', 'emerald', 'amber', 'amber', 'blue', 'blue', 'purple', 'purple']);
            const [dialecticMode, setDialecticMode] = useState(false);
            const [integrationMode, setIntegrationMode] = useState(false);
            const [stats, setStats] = useState({ correct: 0, total: 0 });
            const [isFinished, setIsFinished] = useState(false);
            const [aiStrategy, setAiStrategy] = useState('random');
            
            const [game, setGame] = useState(new Chess());
            const [capturedByThesis, setCapturedByThesis] = useState([]); 
            const [capturedByCritique, setCapturedByCritique] = useState([]); 
            const [dialogueStatus, setDialogueStatus] = useState("Awaiting opening thesis...");
            const [selectedSq, setSelectedSq] = useState(null);
            const [validMoves, setValidMoves] = useState([]);

            const [focalNode, setFocalNode] = useState(null);
            const [timeRemaining, setTimeRemaining] = useState(5000);
            const [inputVal, setInputVal] = useState('');
            const [feedback, setFeedback] = useState(null);
            const inputRef = useRef(null);

            const getSectorIndex = (r, c) => {
                return Math.floor(r / 2) * 2 + Math.floor(c / 4);
            };

            const updateSectorColor = (idx, color) => {
                const newColors = [...sectorColors];
                newColors[idx] = color;
                setSectorColors(newColors);
            };

            const evaluateMove = (gameCopy, move) => {
                const testGame = new Chess(gameCopy.fen());
                testGame.move(move);
                let score = 0;
                const pieceValues = { p: 1, n: 3, b: 3, r: 5, q: 9, k: 0 };
                
                testGame.board().forEach(row => {
                    row.forEach(square => {
                        if (square) {
                            const value = pieceValues[square.type];
                            score += square.color === 'b' ? value : -value;
                        }
                    });
                });

                if (move.captured) score += pieceValues[move.captured] * 2;
                if (testGame.in_check()) score += 3;
                if (testGame.in_checkmate()) score += 1000;
                
                const centerSquares = ['d4', 'd5', 'e4', 'e5'];
                if (centerSquares.includes(move.to)) score += 0.5;

                return score;
            };

            const selectAiMove = (moves) => {
                if (aiStrategy === 'random') return moves[Math.floor(Math.random() * moves.length)];
                const movesWithScores = moves.map(move => ({ move, score: evaluateMove(game, move) }));
                movesWithScores.sort((a, b) => b.score - a.score);
                const candidatePool = movesWithScores.slice(0, 3);
                return candidatePool[Math.floor(Math.random() * candidatePool.length)].move;
            };

            const performMove = useCallback((move) => {
                const gameCopy = new Chess(game.fen());
                const result = gameCopy.move(move);
                if (result) {
                    setGame(gameCopy);
                    if (gameCopy.game_over()) {
                        let outcome = "Inquiry Concluded: ";
                        if (gameCopy.in_checkmate()) outcome += (result.color === 'w' ? "Thesis Defended (Checkmate)" : "Critique Prevails (Checkmate)");
                        else if (gameCopy.in_draw()) outcome += "Synthesis Achieved (Draw)";
                        setDialogueStatus(outcome);
                    } else {
                        if (result.captured) {
                            const side = result.color === 'w' ? 'Thesis' : 'Examiner';
                            const capturedColor = result.color === 'w' ? 'b' : 'w';
                            const pieceGlyph = GLYPHS[capturedColor + result.captured.toUpperCase()];
                            
                            if (result.color === 'w') {
                                setCapturedByThesis(prev => [...prev, { glyph: pieceGlyph, color: capturedColor }]);
                            } else {
                                setCapturedByCritique(prev => [...prev, { glyph: pieceGlyph, color: capturedColor }]);
                            }
                            setDialogueStatus(`${side} addressed the ${PIECE_NAMES[result.captured]} point via ${PIECE_NAMES[result.piece]}.`);
                        } else {
                            setDialogueStatus(`${result.color === 'w' ? 'Thesis' : 'Examiner'} positioned ${PIECE_NAMES[result.piece]} at ${result.to}.`);
                        }
                    }
                    return true;
                }
                return false;
            }, [game]);

            useEffect(() => {
                if (dialecticMode && game.turn() === 'b' && !game.game_over()) {
                    const timer = setTimeout(() => {
                        const moves = game.moves({ verbose: true });
                        if (moves.length) performMove(selectAiMove(moves));
                    }, 800);
                    return () => clearTimeout(timer);
                }
            }, [game, dialecticMode, performMove, aiStrategy]);

            const onSqSelect = (sq) => {
                if (!dialecticMode || game.game_over() || game.turn() === 'b') return;
                const p = game.get(sq);
                if (p && p.color === 'w') {
                    setSelectedSq(sq);
                    setValidMoves(game.moves({ square: sq, verbose: true }).map(m => m.to));
                } else if (selectedSq) {
                    performMove({ from: selectedSq, to: sq, promotion: 'q' });
                    setSelectedSq(null);
                    setValidMoves([]);
                }
            };

            const beginIntegration = () => {
                setStats({ correct: 0, total: 1 });
                setIsFinished(false);
                setIntegrationMode(true);
                setDialecticMode(false);
                nextFocalPoint();
            };

            const nextFocalPoint = () => {
                setFocalNode(Math.floor(Math.random() * 64) + 1);
                setFeedback(null);
                setTimeRemaining(5000);
                setInputVal('');
                setTimeout(() => inputRef.current?.focus(), 100);
            };

            useEffect(() => {
                let interval;
                if (integrationMode && !feedback && !isFinished && timeRemaining > 0) {
                    interval = setInterval(() => setTimeRemaining(t => t - 100), 100);
                } else if (timeRemaining <= 0 && !feedback && integrationMode && !isFinished) {
                    evaluate(false, "Timeout");
                }
                return () => clearInterval(interval);
            }, [integrationMode, timeRemaining, feedback, isFinished]);

            const evaluate = (success, msg) => {
                const targetSector = getSectorIndex(Math.floor((focalNode - 1) / 8), (focalNode - 1) % 8) + 1;
                const newTotal = stats.total + 1;
                if (newTotal > 8) {
                    setStats(s => ({ ...s, correct: success ? s.correct + 1 : s.correct }));
                    setFeedback({ success, message: success ? "Integrated Successfully" : `Error. Sector: ${targetSector}` });
                    setTimeout(() => setIsFinished(true), 1500);
                } else {
                    setStats(s => ({ ...s, total: newTotal, correct: success ? s.correct + 1 : s.correct }));
                    setFeedback({ success, message: success ? "Integrated Successfully" : `Error. Sector: ${targetSector}` });
                    setTimeout(nextFocalPoint, success ? 800 : 2000);
                }
            };

            const getSqId = (r, c) => String.fromCharCode(97 + c) + (8 - r);

            return (
                <div className="min-h-screen p-4 md:p-10 flex flex-col items-center">
                    <div className="max-w-6xl w-full">
                        <header className="flex flex-col md:flex-row items-center justify-between gap-6 mb-6">
                            <div className="flex items-center gap-5">
                                <div className="w-14 h-14 bg-slate-800 rounded-2xl flex items-center justify-center border border-white/10">
                                    <Icon name="BookOpen" size={28} className="text-white" />
                                </div>
                                <div>
                                    <h1 className="text-2xl font-black tracking-tight leading-none mb-1 uppercase">Thesis Integration Workspace</h1>
                                    <div className="flex items-center gap-3">
                                        <a href="https://lysander666.github.io/nahla-tracker/thesis-memory-web" className="text-[10px] font-bold uppercase text-slate-500 hover:text-white transition-colors">‚Üê Thesis Memory Web</a>
                                        <span className="text-[10px] font-bold uppercase text-slate-600">v3.1.0</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="flex items-center gap-3">
                                <button onClick={() => { setDialecticMode(!dialecticMode); setIntegrationMode(false); setSelectedSq(null); setValidMoves([]); }} className={`px-5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${dialecticMode ? 'bg-indigo-600 text-white' : 'bg-slate-800 text-slate-400'}`}>
                                    <Icon name="MessageSquare" size={14} className="inline mr-2"/> {dialecticMode ? 'Inquiry Active' : 'Inquiry Mode'}
                                </button>
                                <button onClick={integrationMode ? () => setIntegrationMode(false) : beginIntegration} className={`px-5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${integrationMode ? 'bg-red-500/10 text-red-400 border border-red-500/20' : 'bg-white text-slate-900 shadow-lg'}`}>
                                    <Icon name={integrationMode ? "Square" : "Zap"} size={14} className="inline mr-2"/> {integrationMode ? 'Conclude' : 'Memory Sprint'}
                                </button>
                            </div>
                        </header>

                        <div className="bg-white/5 border border-white/10 rounded-2xl p-4 mb-8 text-[11px] leading-relaxed text-slate-400 max-w-2xl shadow-xl">
                            <strong className="text-white block mb-1 uppercase tracking-wider">About this Workspace</strong>
                            This dialectical engine facilitates cognitive mapping through strategic engagement. By pairing traditional chess mechanics with symbolic vectors, users reinforce memory clusters while refining theoretical synthesis in the Dialectic Mode. 4x2 sector grids allow for segmented focus during integration.
                        </div>

                        <div className="grid lg:grid-cols-[1fr_360px] gap-8 items-start">
                            <div className="space-y-4">
                                <div className={`bg-slate-900/60 p-1.5 rounded-[2.5rem] border border-white/5 shadow-2xl board-visual-state ${integrationMode && !isFinished ? 'opacity-10 grayscale' : 'opacity-100'}`}>
                                    <div className="p-3 bg-black/40 rounded-[2rem] border border-white/5 relative overflow-hidden">
                                        <div className="grid grid-rows-8 gap-1.5 relative z-10">
                                            {Array.from({ length: 8 }).map((_, rIdx) => (
                                                <div key={rIdx} className="grid grid-cols-8 gap-1.5">
                                                    {Array.from({ length: 8 }).map((_, cIdx) => {
                                                        const nodeNum = (rIdx * 8) + cIdx + 1;
                                                        const sectorIdx = getSectorIndex(rIdx, cIdx);
                                                        const color = sectorColors[sectorIdx];
                                                        const sqId = getSqId(rIdx, cIdx);
                                                        const p = game.get(sqId);
                                                        const isLandmark = nodeNum % 8 === 0;
                                                        const isLight = (rIdx + cIdx) % 2 === 0;

                                                        return (
                                                            <div key={cIdx} onClick={() => onSqSelect(sqId)} className={`aspect-square rounded-lg border flex items-center justify-center relative transition-all duration-200 ${isLight ? 'tile-light' : 'tile-dark'} ${selectedSq === sqId ? 'ring-2 ring-indigo-500 z-20 scale-105' : ''} ${colorClasses[color]} ${integrationMode && focalNode === nodeNum ? 'ring-4 ring-white shadow-2xl scale-110 z-20' : ''} ${dialecticMode ? 'cursor-pointer' : 'cursor-default'}`}>
                                                                <span className={`absolute top-0.5 left-1 text-[8px] font-mono font-bold opacity-30 ${isLandmark ? 'opacity-90 font-black text-white' : ''}`}>{nodeNum}</span>
                                                                {dialecticMode && validMoves.includes(sqId) && <div className="absolute inset-0 flex items-center justify-center"><div className="w-1.5 h-1.5 bg-indigo-500/50 rounded-full" /></div>}
                                                                {dialecticMode && p && (
                                                                    <span className={`chess-piece ${p.color === 'w' ? 'white-piece' : 'black-piece'}`}>
                                                                        {GLYPHS[p.color + p.type.toUpperCase()]}
                                                                    </span>
                                                                )}
                                                                {!dialecticMode && <span className={`text-xl font-black tracking-tighter number-glow opacity-90 ${isLandmark ? 'scale-110 text-white' : ''}`}>{nodeNum}</span>}
                                                            </div>
                                                        );
                                                    })}
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <aside className="space-y-6">
                                {dialecticMode ? (
                                    <div className="bg-slate-900/40 p-6 rounded-[2.5rem] border border-white/5 shadow-2xl flex flex-col gap-5">
                                        <div className="bg-white/5 border border-white/10 p-5 rounded-2xl flex flex-col gap-4">
                                            <div>
                                                <span className="text-[9px] font-black text-slate-500 uppercase tracking-widest block mb-2">Examiner Critiques</span>
                                                <div className="tray-area">
                                                    {capturedByCritique.map((p, i) => (
                                                        <span key={i} className={`text-xl leading-none ${p.color === 'w' ? 'text-white' : 'text-slate-500'}`}>
                                                            {p.glyph}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>

                                            <div className="min-h-[80px] py-2 border-y border-white/5">
                                                <span className="text-[9px] font-black text-slate-500 uppercase tracking-widest block mb-1">Dialogue Log</span>
                                                <p className="text-sm font-bold text-white italic leading-snug">"{dialogueStatus}"</p>
                                            </div>

                                            <div>
                                                <span className="text-[9px] font-black text-indigo-400 uppercase tracking-widest block mb-2 text-right">Thesis Synthesis</span>
                                                <div className="tray-area justify-end">
                                                    {capturedByThesis.map((p, i) => (
                                                        <span key={i} className={`text-xl leading-none ${p.color === 'w' ? 'text-white' : 'text-slate-500'}`}>
                                                            {p.glyph}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-white/5 border border-white/10 p-4 rounded-2xl">
                                            <span className="text-[9px] font-black text-slate-500 uppercase tracking-widest block mb-3">AI Intelligence Mode</span>
                                            <div className="flex gap-2">
                                                <button onClick={() => setAiStrategy('random')} className={`flex-1 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all ${aiStrategy === 'random' ? 'bg-emerald-500 text-white shadow-[0_0_10px_rgba(16,185,129,0.4)]' : 'bg-white/5 text-slate-500 hover:text-slate-300'}`}>Random</button>
                                                <button onClick={() => setAiStrategy('strategy')} className={`flex-1 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all ${aiStrategy === 'strategy' ? 'bg-red-500 text-white shadow-[0_0_10px_rgba(239,68,68,0.4)]' : 'bg-white/5 text-slate-500 hover:text-slate-300'}`}>Strategy</button>
                                            </div>
                                        </div>

                                        <button onClick={() => { setGame(new Chess()); setCapturedByThesis([]); setCapturedByCritique([]); setDialogueStatus("Inquiry re-initialized."); setValidMoves([]); setSelectedSq(null); }} className="w-full py-3.5 bg-slate-800 rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-slate-700 transition-all border border-white/5">Reset Match</button>
                                    </div>
                                ) : integrationMode ? (
                                    <div className="bg-indigo-950/30 p-8 rounded-[2.5rem] shadow-2xl flex flex-col items-center gap-6 text-center border border-indigo-500/20">
                                        {!isFinished ? (
                                            <>
                                                <div className="text-[10px] font-black uppercase tracking-widest text-indigo-400">Recall Point {stats.total}/8</div>
                                                <div className="text-8xl font-black text-white tracking-tighter drop-shadow-2xl">{focalNode}</div>
                                                <div className="w-full h-1.5 bg-slate-800 rounded-full overflow-hidden">
                                                    <div className="h-full bg-white timer-bar shadow-[0_0_10px_white]" style={{ width: `${(timeRemaining / 5000) * 100}%` }} />
                                                </div>
                                                <div className="flex flex-col gap-2">
                                                    <span className="text-[9px] font-black text-slate-500 uppercase">Sector Map (1-8)</span>
                                                    <input ref={inputRef} type="text" value={inputVal} onChange={e => {
                                                        const v = e.target.value;
                                                        if (/^[1-8]?$/.test(v)) {
                                                            setInputVal(v);
                                                            if (v !== '') evaluate(parseInt(v) === Math.ceil(focalNode / 8), "Error");
                                                        }
                                                    }} className="academic-input" maxLength="1" autoFocus />
                                                </div>
                                            </>
                                        ) : (
                                            <div className="space-y-4">
                                                <div className="text-[10px] font-black uppercase tracking-widest text-indigo-400">Integration Complete</div>
                                                <div className="text-6xl font-black text-white">{Math.round(stats.correct/8*100)}%</div>
                                                <button onClick={beginIntegration} className="px-8 py-3 bg-white text-slate-900 rounded-xl font-black uppercase text-[10px] tracking-widest">Restart</button>
                                            </div>
                                        )}
                                        {feedback && !isFinished && <div className={`text-[9px] font-black uppercase tracking-widest px-4 py-2 rounded-lg ${feedback.success ? 'text-emerald-400 bg-emerald-500/10' : 'text-red-400 bg-red-500/10'}`}>{feedback.message}</div>}
                                    </div>
                                ) : (
                                    <div className="bg-slate-900/30 p-8 rounded-[2.5rem] border border-white/5 space-y-6">
                                        <div>
                                            <h3 className="text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6 flex items-center gap-3">
                                                <Icon name="Palette" size={14} className="text-indigo-400" /> Sector Mapping (4x2)
                                            </h3>
                                            <div className="grid grid-cols-2 gap-4">
                                                {sectorColors.map((curr, idx) => (
                                                    <div key={idx} className="flex flex-col gap-2 bg-black/20 p-3 rounded-xl border border-white/5">
                                                        <span className="text-[8px] font-black text-slate-500 uppercase">Sec {idx + 1}</span>
                                                        <div className="flex justify-between gap-1">
                                                            {['emerald', 'amber', 'blue', 'purple'].map(c => (
                                                                <button key={c} onClick={() => updateSectorColor(idx, c)} className={`w-3.5 h-3.5 rounded-full border transition-transform ${btnColors[c]} ${curr === c ? 'border-white scale-125 z-10' : 'border-transparent opacity-20 hover:opacity-50'}`} />
                                                            ))}
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                )}

                                <div className="legend-card space-y-4">
                                    <h3 className="text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-4 flex items-center gap-3">
                                        <Icon name="Compass" size={14} className="text-indigo-400" /> Dialectical Symbols
                                    </h3>
                                    <div className="grid grid-cols-2 gap-3">
                                        <div className="flex items-center gap-3 bg-white/5 p-2 rounded-xl">
                                            <span className="text-xl">üü¢</span>
                                            <span className="text-[9px] font-bold uppercase text-slate-400">King</span>
                                        </div>
                                        <div className="flex items-center gap-3 bg-white/5 p-2 rounded-xl">
                                            <span className="text-xl">üìó</span>
                                            <span className="text-[9px] font-bold uppercase text-slate-400">Queen</span>
                                        </div>
                                    </div>
                                    <div className="space-y-2">
                                        <span className="text-[8px] font-black text-slate-600 uppercase tracking-widest">Major Assets (Files A / H)</span>
                                        <div className="flex justify-between bg-white/5 p-2 rounded-xl">
                                            <div className="flex items-center gap-2"><span className="text-lg">üå±</span><span className="text-[9px] text-slate-400 uppercase">Rook L</span></div>
                                            <div className="flex items-center gap-2"><span className="text-[9px] text-slate-400 uppercase text-right">Rook R</span><span className="text-lg">üß™</span></div>
                                        </div>
                                        <div className="flex justify-between bg-white/5 p-2 rounded-xl">
                                            <div className="flex items-center gap-2"><span className="text-lg">‚ù§Ô∏è</span><span className="text-[9px] text-slate-400 uppercase">Knight L</span></div>
                                            <div className="flex items-center gap-2"><span className="text-[9px] text-slate-400 uppercase text-right">Knight R</span><span className="text-lg">ü©∏</span></div>
                                        </div>
                                        <div className="flex justify-between bg-white/5 p-2 rounded-xl">
                                            <div className="flex items-center gap-2"><span className="text-lg">üü£</span><span className="text-[9px] text-slate-400 uppercase">Bishop L</span></div>
                                            <div className="flex items-center gap-2"><span className="text-[9px] text-slate-400 uppercase text-right">Bishop R</span><span className="text-lg">üå∏</span></div>
                                        </div>
                                    </div>
                                    <div className="space-y-2">
                                        <span className="text-[8px] font-black text-slate-600 uppercase tracking-widest">Pawn Vectors (Files A ‚Üí H)</span>
                                        <div className="grid grid-cols-4 gap-2">
                                            {PAWN_HINTS.map((h, i) => (
                                                <div key={i} className="bg-white/5 p-1.5 rounded-lg flex flex-col items-center gap-1">
                                                    <span className="text-lg">{h}</span>
                                                    <span className="text-[7px] text-slate-500 font-bold uppercase">{String.fromCharCode(65 + i)}</span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </aside>
                        </div>
                        
                        <footer className="mt-12 py-8 border-t border-white/5 flex justify-between items-center opacity-30 text-[8px] uppercase font-black tracking-[0.4em] text-slate-600">
                            <div>Dialectical Mastery Engine v3.1.0</div>
                            <div>Individual Cognitive Mapping Enabled</div>
                        </footer>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
